name: Generate Code by `terraform plan -generate-config-out`
description: Generate Code by `terraform plan -generate-config-out`
inputs:
  github_token:
    description: |
      GitHub Access Token
      contents:write - Push a commit
    required: false
    default: ${{ github.token }}
  branch:
    description: "branch name to be updated"
    required: true
  file:
    description: "file name to be updated"
    required: true

  securefix_action_app_id:
    description: |
      GitHub App ID for Securefix Action
      issues:write
    required: false
  securefix_action_app_private_key:
    description: |
      GitHub App Private Key for Securefix Action
    required: false
runs:
  using: composite
  steps:
    - uses: suzuki-shunsuke/tfaction/js@main
      with:
        action: generate-config-out
        github_token: ${{ inputs.github_token }}
        branch: ${{ inputs.branch }}
        file: ${{ inputs.file }}
        securefix_action_app_id: ${{ inputs.securefix_action_app_id }}
        securefix_action_app_private_key: ${{ inputs.securefix_action_app_private_key }}
