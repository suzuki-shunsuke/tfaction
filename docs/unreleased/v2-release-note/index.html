<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-unreleased/v2-release-note" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">v2 Release Note | tfaction</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/v2-release-note"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="v2 Release Note | tfaction"><meta data-rh="true" name="description" content="Summary"><meta data-rh="true" property="og:description" content="Summary"><link data-rh="true" rel="canonical" href="https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/v2-release-note"><link data-rh="true" rel="alternate" href="https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/v2-release-note" hreflang="en"><link data-rh="true" rel="alternate" href="https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/v2-release-note" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://LUUUGNZT4I-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Unreleased","item":"https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/"},{"@type":"ListItem","position":2,"name":"v2 Release Note","item":"https://suzuki-shunsuke.github.io/tfaction/docs/unreleased/v2-release-note"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="tfaction" href="/tfaction/docs/opensearch.xml"><link rel="stylesheet" href="/tfaction/docs/assets/css/styles.b065409c.css">
<script src="/tfaction/docs/assets/js/runtime~main.8508d376.js" defer="defer"></script>
<script src="/tfaction/docs/assets/js/main.6294aec2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tfaction/docs/"><b class="navbar__title text--truncate">tfaction</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/suzuki-shunsuke/tfaction" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://notebooklm.google.com/notebook/77adecc4-c88b-4b98-830f-fb79a448c451" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">NotebookLM<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://deepwiki.com/suzuki-shunsuke/tfaction" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DeepWiki<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tfaction/docs/"><span title="tfaction" class="linkLabel_WmDU">tfaction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/tfaction/docs/feature/"><span title="Feature" class="categoryLinkLabel_W154">Feature</span></a><button aria-label="Expand sidebar category &#x27;Feature&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/tfaction/docs/config/"><span title="Config" class="categoryLinkLabel_W154">Config</span></a><button aria-label="Expand sidebar category &#x27;Config&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/tfaction/docs/upgrade-guide/"><span title="Upgrade Guide" class="categoryLinkLabel_W154">Upgrade Guide</span></a><button aria-label="Expand sidebar category &#x27;Upgrade Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/tfaction/docs/unreleased/"><span title="Unreleased" class="categoryLinkLabel_W154">Unreleased</span></a><button aria-label="Collapse sidebar category &#x27;Unreleased&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/overview"><span title="tfaction" class="linkLabel_WmDU">tfaction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/hide-old-comment"><span title="Hide Old PR Comments" class="linkLabel_WmDU">Hide Old PR Comments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/json-schema"><span title="JSON Schema for Configuration Files" class="linkLabel_WmDU">JSON Schema for Configuration Files</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/config-priority"><span title="Configuration Priority" class="linkLabel_WmDU">Configuration Priority</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/single-action"><span title="tfaction v2 is a Single Action" class="linkLabel_WmDU">tfaction v2 is a Single Action</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/monorepo"><span title="Monorepo" class="linkLabel_WmDU">Monorepo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/detect-module-dependency"><span title="Run Terraform When a Dependent Local-Path Module is Updated" class="linkLabel_WmDU">Run Terraform When a Dependent Local-Path Module is Updated</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/lint"><span title="Linting and Formatting" class="linkLabel_WmDU">Linting and Formatting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/scaffold-working-directory"><span title="Creating a Root Module from a Template" class="linkLabel_WmDU">Creating a Root Module from a Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/aws"><span title="Configuration for AWS" class="linkLabel_WmDU">Configuration for AWS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/google-cloud"><span title="Configuration for Google Cloud" class="linkLabel_WmDU">Configuration for Google Cloud</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/target"><span title="Configuring Targets (Aliases)" class="linkLabel_WmDU">Configuring Targets (Aliases)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/tfcmt-config"><span title="Configuring tfcmt" class="linkLabel_WmDU">Configuring tfcmt</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/terraform-options"><span title="Configuring Terraform Command Options" class="linkLabel_WmDU">Configuring Terraform Command Options</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/limit-max-changed-dirs"><span title="Limiting the Number of Root Modules Changed in a Single PR" class="linkLabel_WmDU">Limiting the Number of Root Modules Changed in a Single PR</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/terraform-plan-generate-config-out"><span title="Code Generation with terraform plan -generate-config-out" class="linkLabel_WmDU">Code Generation with terraform plan -generate-config-out</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/csm-actions"><span title="Secure Commits and PR Creation with CSM Actions" class="linkLabel_WmDU">Secure Commits and PR Creation with CSM Actions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/opentofu-terragrunt"><span title="Using OpenTofu or Terragrunt" class="linkLabel_WmDU">Using OpenTofu or Terragrunt</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/skip-terraform"><span title="Skipping terraform plan and apply" class="linkLabel_WmDU">Skipping terraform plan and apply</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tfaction/docs/unreleased/update-pr-branch"><span title="Automatic PR Branch Updates" class="linkLabel_WmDU">Automatic PR Branch Updates</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tfaction/docs/unreleased/v2-release-note"><span title="v2 Release Note" class="linkLabel_WmDU">v2 Release Note</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tfaction/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/tfaction/docs/unreleased/"><span>Unreleased</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">v2 Release Note</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>v2 Release Note</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>tfaction v2 includes various breaking changes, and all users will need to modify their code.
See the upgrade guide for details.
tfaction, which was previously a collection of many actions, has been entirely rewritten as a single JavaScript Action. Different features such as plan, apply, and test are now selected via the <code>action</code> input.
This significantly improves both performance and maintainability.
Additionally, it includes feature enhancements such as the introduction of a template engine, support for Reviewdog customization, and the official release of the target replacement feature.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="improvements">Improvements<a href="#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements" translate="no">​</a></h2>
<ul>
<li class="">Performance improvements</li>
<li class="">Improved maintainability</li>
<li class="">Support for customizing Reviewdog settings</li>
<li class="">Official release of replace_target</li>
<li class="">Automatic aqua installation</li>
<li class="">Support for customizing PR title, body, and comment in PR scaffolding</li>
<li class="">Glob support in target_groups.working_directory<!-- -->
<ul>
<li class="">Enables more flexible configuration</li>
</ul>
</li>
<li class="">Automatic fixes via tflint --fix enabled by default</li>
<li class="">Addition of <code>github_token_for_github_provider</code> input for passing a GitHub Access Token for the GitHub Provider</li>
<li class="">Automatic PR branch update when changes are detected on the base branch by comparing root modules between base and feature branches</li>
<li class="">Support hiding old comments by hide-comment action</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-improvements">Performance Improvements<a href="#performance-improvements" class="hash-link" aria-label="Direct link to Performance Improvements" title="Direct link to Performance Improvements" translate="no">​</a></h3>
<p>Previously, all <code>suzuki-shunsuke/tfaction/*</code> actions except <code>suzuki-shunsuke/tfaction/js</code> were Composite Actions.
In v2, they have been consolidated into a single JavaScript Action: <code>suzuki-shunsuke/tfaction</code>.
This significantly reduces the time spent downloading actions and greatly shortens the processing time of the <code>Set up job</code> step, which runs at the beginning of every GitHub Actions job.
While results vary by environment, we observed a reduction of approximately 20 to 40 seconds in our environment.
Additionally, rewriting everything as a single JavaScript Action eliminates overhead between Composite Action steps and provides minor performance improvements by replacing external command execution with JavaScript.</p>
<p>The removal of AWS and Google Cloud authentication is also related to performance improvements.
Due to how GitHub Actions works, actions are downloaded during <code>Set up job</code> even if the step running the action is skipped.
This means that even when AWS or Google Cloud authentication is not needed, the action is still downloaded, which is wasteful.
Embedding the functionality of <code>aws-actions/configure-aws-credentials</code> and <code>google-github-actions/auth</code> into tfaction&#x27;s TypeScript would avoid the download, but we decided against it due to the maintenance burden.
Instead, users now run these actions themselves as needed.
This can also be seen as enabling more flexible authentication handling than before.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="improved-maintainability">Improved Maintainability<a href="#improved-maintainability" class="hash-link" aria-label="Direct link to Improved Maintainability" title="Direct link to Improved Maintainability" translate="no">​</a></h3>
<p>Rewriting all code in TypeScript has improved maintainability.
Previously, with the Composite Action implementation, data was passed between steps using inputs/outputs and environment variables.
However, the type system for these interfaces is extremely limited.
Only the string type is supported, requiring data serialization, and it is difficult to catch mistakes in input/output names or types before execution.
Additionally, there are size limits on data, requiring the use of files for large data.</p>
<p>On the other hand, when everything is written in TypeScript, its powerful type system and editor integration make it easy to catch mistakes quickly, provide code completion, and make unit testing straightforward.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="support-for-customizing-reviewdog-settings">Support for Customizing Reviewdog Settings<a href="#support-for-customizing-reviewdog-settings" class="hash-link" aria-label="Direct link to Support for Customizing Reviewdog Settings" title="Direct link to Support for Customizing Reviewdog Settings" translate="no">​</a></h3>
<p>Results from trivy and tflint are reported via reviewdog, and those settings can now be customized.
The most significant change is that <code>-filter-mode</code> can now be modified.
Previously, <code>--filter-mode nofilter</code> was fixed, which meant code not changed in the PR was also included.
By setting <code>--filter-mode</code> to <code>added</code>, only code changed in the PR is included.
There are trade-offs, and neither option is universally better, but there are cases where <code>added</code> is preferable because <code>nofilter</code> makes adoption difficult.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="official-release-of-replace">Official Release of replace<a href="#official-release-of-replace" class="hash-link" aria-label="Direct link to Official Release of replace" title="Direct link to Official Release of replace" translate="no">​</a></h3>
<p>replace is a feature that enables more flexible conversion from working directory to target using regular expressions.
This feature actually existed before, but it was treated as an unofficial feature without documentation because tfaction-go could not support it.</p>
<div class="language-yaml:tfaction-root.yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml:tfaction-root.yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">replace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  patterns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Replace /services/ to / : e.g. github/services/foo =&gt; github/foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - regexp: /services/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replace: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Replace /production$ to /prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - regexp: /production$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replace: /prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Remove the prefix `google-` : e.g. foo/google-users/production =&gt; foo/users/prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - regexp: /google-(.*)/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replace: &quot;/$1/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      flags: g</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="automatic-aqua-installation">Automatic aqua Installation<a href="#automatic-aqua-installation" class="hash-link" aria-label="Direct link to Automatic aqua Installation" title="Direct link to Automatic aqua Installation" translate="no">​</a></h3>
<p>tfaction now installs aqua automatically, so users no longer need to install it themselves.
However, the aqua version is hardcoded and cannot be changed.
This makes it easier to adopt tfaction even if you are not already using aqua.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="bug-fixes">Bug Fixes<a href="#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes" translate="no">​</a></h2>
<ul>
<li class="">Properly catch exceptions in Node.js</li>
<li class="">Support for Terragrunt v0.88.0 and later</li>
<li class="">Fix inability to parse terragrunt plan and apply results</li>
<li class="">Fix issues when tfaction-root.yaml is in a subdirectory</li>
<li class="">Fix issues when the repository is checked out to a location other than github.workspace</li>
<li class="">Fix inability to set <code>minimum_detection_interval</code> to 0 in drift detection</li>
<li class="">Fix list-targets matching template directories</li>
<li class="">Fix inability to place a root module at the repository root<!-- -->
<ul>
<li class="">Previously, an empty TFACTION_TARGET caused failures, preventing root modules at the repository root</li>
</ul>
</li>
<li class="">Fix conftest running even when destroy is enabled in tfaction.yaml</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properly-catch-exceptions-in-nodejs">Properly Catch Exceptions in Node.js<a href="#properly-catch-exceptions-in-nodejs" class="hash-link" aria-label="Direct link to Properly Catch Exceptions in Node.js" title="Direct link to Properly Catch Exceptions in Node.js" translate="no">​</a></h3>
<p>Fixed a bug where exceptions were not properly caught and were output as-is.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="support-for-terragrunt-v0880-and-later">Support for Terragrunt v0.88.0 and Later<a href="#support-for-terragrunt-v0880-and-later" class="hash-link" aria-label="Direct link to Support for Terragrunt v0.88.0 and Later" title="Direct link to Support for Terragrunt v0.88.0 and Later" translate="no">​</a></h3>
<p><a href="https://github.com/suzuki-shunsuke/tfaction/issues/3148" target="_blank" rel="noopener noreferrer" class="">https://github.com/suzuki-shunsuke/tfaction/issues/3148</a></p>
<p>Fixed an issue where tfaction did not work with Terragrunt v0.88.0.
It should also work with older versions of Terragrunt prior to v0.73.0 that do not support <code>terragrunt run</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="fix-inability-to-parse-terragrunt-plan-and-apply-results">Fix Inability to Parse terragrunt plan and apply Results<a href="#fix-inability-to-parse-terragrunt-plan-and-apply-results" class="hash-link" aria-label="Direct link to Fix Inability to Parse terragrunt plan and apply Results" title="Direct link to Fix Inability to Parse terragrunt plan and apply Results" translate="no">​</a></h3>
<p><a href="https://suzuki-shunsuke.github.io/tfcmt/terragrunt" target="_blank" rel="noopener noreferrer" class="">https://suzuki-shunsuke.github.io/tfcmt/terragrunt</a></p>
<p>Before:</p>
<p><img decoding="async" loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/f91a5ff415ef-20260112.png" alt="" class="img_ev3q"></p>
<p>After:</p>
<p><img decoding="async" loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/887690246667-20260112.png" alt="" class="img_ev3q"></p>
<p>Originally, users could work around this issue by setting the environment variable <code>TERRAGRUNT_LOG_DISABLE</code> to <code>true</code>, but tfaction now sets this environment variable automatically.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="others">Others<a href="#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others" translate="no">​</a></h2>
<ul>
<li class="">Changed slashes <code>/</code> to underscores <code>__</code> in created branch names<!-- -->
<ul>
<li class="">Using <code>/</code> in branch names can cause issues, so this was changed</li>
</ul>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/suzuki-shunsuke/tfaction-docs/edit/main/docs/unreleased/v2-release-note.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tfaction/docs/unreleased/update-pr-branch"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Automatic PR Branch Updates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#improvements" class="table-of-contents__link toc-highlight">Improvements</a><ul><li><a href="#performance-improvements" class="table-of-contents__link toc-highlight">Performance Improvements</a></li><li><a href="#improved-maintainability" class="table-of-contents__link toc-highlight">Improved Maintainability</a></li><li><a href="#support-for-customizing-reviewdog-settings" class="table-of-contents__link toc-highlight">Support for Customizing Reviewdog Settings</a></li><li><a href="#official-release-of-replace" class="table-of-contents__link toc-highlight">Official Release of replace</a></li><li><a href="#automatic-aqua-installation" class="table-of-contents__link toc-highlight">Automatic aqua Installation</a></li></ul></li><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a><ul><li><a href="#properly-catch-exceptions-in-nodejs" class="table-of-contents__link toc-highlight">Properly Catch Exceptions in Node.js</a></li><li><a href="#support-for-terragrunt-v0880-and-later" class="table-of-contents__link toc-highlight">Support for Terragrunt v0.88.0 and Later</a></li><li><a href="#fix-inability-to-parse-terragrunt-plan-and-apply-results" class="table-of-contents__link toc-highlight">Fix Inability to Parse terragrunt plan and apply Results</a></li></ul></li><li><a href="#others" class="table-of-contents__link toc-highlight">Others</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/suzuki-shunsuke/tfaction" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Shunsuke Suzuki. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>