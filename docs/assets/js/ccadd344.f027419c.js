"use strict";(globalThis.webpackChunktfaction=globalThis.webpackChunktfaction||[]).push([[5293],{5726(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"unreleased/destroy","title":"Destroying All Resources in a Root Module","description":"To destroy all resources in a root module, set destroy: true in tfaction.yaml.","source":"@site/docs/unreleased/destroy.md","sourceDirName":"unreleased","slug":"/unreleased/destroy","permalink":"/tfaction/docs/unreleased/destroy","draft":false,"unlisted":false,"editUrl":"https://github.com/suzuki-shunsuke/tfaction-docs/edit/main/docs/unreleased/destroy.md","tags":[],"version":"current","sidebarPosition":2400,"frontMatter":{"sidebar_position":2400},"sidebar":"tutorialSidebar","previous":{"title":"Limiting the Number of Root Modules Changed in a Single PR","permalink":"/tfaction/docs/unreleased/limit-max-changed-dirs"},"next":{"title":"Code Generation with terraform plan -generate-config-out","permalink":"/tfaction/docs/unreleased/terraform-plan-generate-config-out"}}');var r=n(4848),s=n(8453);const i={sidebar_position:2400},a="Destroying All Resources in a Root Module",d={},c=[{value:"Preventing Renovate from Running on Directories Marked for Destruction",id:"preventing-renovate-from-running-on-directories-marked-for-destruction",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"destroying-all-resources-in-a-root-module",children:"Destroying All Resources in a Root Module"})}),"\n",(0,r.jsxs)(t.p,{children:["To destroy all resources in a root module, set ",(0,r.jsx)(t.code,{children:"destroy: true"})," in ",(0,r.jsx)(t.code,{children:"tfaction.yaml"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="tfaction.yaml"',children:"destroy: true\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This causes terraform plan to run with the ",(0,r.jsx)(t.code,{children:"-destroy"})," option.\nAfter apply completes and all resources are destroyed, you can then delete the directory entirely."]}),"\n",(0,r.jsx)(t.p,{children:"Note that if you delete the directory before destroying the resources, the resources will remain as-is.\nIf you want to stop managing resources with Terraform while keeping them intact, deleting the directory without destroying is acceptable."}),"\n",(0,r.jsx)(t.h2,{id:"preventing-renovate-from-running-on-directories-marked-for-destruction",children:"Preventing Renovate from Running on Directories Marked for Destruction"}),"\n",(0,r.jsxs)(t.p,{children:["It is generally not appropriate for Renovate to update code in directories where ",(0,r.jsx)(t.code,{children:"destroy: true"})," is set.\nYou can exclude these directories using Renovate's ",(0,r.jsx)(t.a,{href:"https://docs.renovatebot.com/configuration-options/#ignorepaths",children:"ignorePaths"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",metastring:'title="renovate.json"',children:'{\n  "ignorePaths": ["aws/foo/dev"]\n}\n'})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,t,n){n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const r={},s=o.createContext(r);function i(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);