"use strict";(globalThis.webpackChunktfaction=globalThis.webpackChunktfaction||[]).push([[2847],{4748(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"unreleased/plan-file","title":"Safe Apply Using Plan Files","description":"This is a built-in feature of tfaction and requires no action from users.","source":"@site/docs/unreleased/plan-file.md","sourceDirName":"unreleased","slug":"/unreleased/plan-file","permalink":"/tfaction/docs/unreleased/plan-file","draft":false,"unlisted":false,"editUrl":"https://github.com/suzuki-shunsuke/tfaction-docs/edit/main/docs/unreleased/plan-file.md","tags":[],"version":"current","sidebarPosition":3500,"frontMatter":{"sidebar_position":3500},"sidebar":"tutorialSidebar","previous":{"title":"Testing Workflow Changes","permalink":"/tfaction/docs/unreleased/test-workflow"},"next":{"title":"v2 Release Note","permalink":"/tfaction/docs/unreleased/v2-release-note"}}');var r=t(4848),s=t(8453);const i={sidebar_position:3500},o="Safe Apply Using Plan Files",l={},p=[];function c(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"safe-apply-using-plan-files",children:"Safe Apply Using Plan Files"})}),"\n",(0,r.jsx)(n.p,{children:"This is a built-in feature of tfaction and requires no action from users."}),"\n",(0,r.jsx)(n.p,{children:"tfaction runs terraform plan on pull requests and terraform apply when the PR is merged.\nIn Terraform, you can generate a plan file during terraform plan and pass it to terraform apply to ensure the exact same changes reviewed in plan are applied."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"terraform plan -out=plan.tfplan\nterraform apply plan.tfplan\n"})}),"\n",(0,r.jsx)(n.p,{children:"Without a plan file, there is a risk that terraform apply produces different results than what was reviewed during terraform plan.\ntfaction uploads the plan file to GitHub Artifacts and downloads it during terraform apply.\nSince GitHub Artifacts is used, there is no dependency on S3, GCS, or other external storage. Additionally, uploaded plan files cannot be tampered with after the fact, making this approach secure."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>o});var a=t(6540);const r={},s=a.createContext(r);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);