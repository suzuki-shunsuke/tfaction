"use strict";(self.webpackChunktfaction=self.webpackChunktfaction||[]).push([[588],{3107:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var n=t(4848),o=t(5680);const a={sidebar_position:1110},i="Use a Terraform compatible tool",c={id:"feature/use-terraform-compatible-tool",title:"Use a Terraform compatible tool",description:"#1554 tfaction >= v1.2.0",source:"@site/docs/feature/use-terraform-compatible-tool.md",sourceDirName:"feature",slug:"/feature/use-terraform-compatible-tool",permalink:"/tfaction/docs/feature/use-terraform-compatible-tool",draft:!1,unlisted:!1,editUrl:"https://github.com/suzuki-shunsuke/tfaction-docs/edit/main/docs/feature/use-terraform-compatible-tool.md",tags:[],version:"current",sidebarPosition:1110,frontMatter:{sidebar_position:1110},sidebar:"tutorialSidebar",previous:{title:"Destroy resources",permalink:"/tfaction/docs/feature/destroy"},next:{title:"Run CI on working directories that depend on a updated local path Module",permalink:"/tfaction/docs/feature/local-path-module"}},s={},l=[{value:"Overview",id:"overview",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"\ud83d\udca1 Combine OpenTofu and Terragrunt",id:"-combine-opentofu-and-terragrunt",level:2},{value:"\ud83d\udca1 Validate <code>terraform_command</code>",id:"-validate-terraform_command",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.RP)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"use-a-terraform-compatible-tool",children:"Use a Terraform compatible tool"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"https://github.com/suzuki-shunsuke/tfaction/pull/1554",children:"#1554"})," tfaction >= ",(0,n.jsx)(r.a,{href:"https://github.com/suzuki-shunsuke/tfaction/releases/tag/v1.2.0",children:"v1.2.0"})]}),"\n",(0,n.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(r.p,{children:["tfaction executes Terraform commands such as terraform init, fmt, validate, plan, apply, and so on.\nYou can also execute any tools compatible with Terraform instead of Terraform.\nYou can use tools such as ",(0,n.jsx)(r.a,{href:"https://opentofu.org/",children:"OpenTofu"})," and ",(0,n.jsx)(r.a,{href:"https://terragrunt.gruntwork.io/",children:"Terragrunt"})," instead of Terraform."]}),"\n",(0,n.jsx)(r.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,n.jsxs)(r.p,{children:["You can specify a tool by the setting ",(0,n.jsx)(r.code,{children:"terraform_command"})," in ",(0,n.jsx)(r.code,{children:"tfaction-root.yaml"})," and ",(0,n.jsx)(r.code,{children:"tfaction.yaml"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"tfaction-root.yaml"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"terraform_command: tofu # terragrunt\ntarget_groups:\n  - working_directory: aws/\n    terraform_command: tofu # terragrunt\n"})}),"\n",(0,n.jsx)(r.p,{children:"tfaction.yaml"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"terraform_command: tofu # terragrunt\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Then the given command is executed instead of ",(0,n.jsx)(r.code,{children:"terraform"}),".\nFor example, if ",(0,n.jsx)(r.code,{children:"terraform_command"})," is ",(0,n.jsx)(r.code,{children:"tofu"}),", commands such as tofu init, fmt, validate, plan, apply are executed instead of terraform."]}),"\n",(0,n.jsx)(r.h2,{id:"-combine-opentofu-and-terragrunt",children:"\ud83d\udca1 Combine OpenTofu and Terragrunt"}),"\n",(0,n.jsx)(r.p,{children:"You can also combine OpenTofu and Terragrunt."}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["Set ",(0,n.jsx)(r.code,{children:"terraform_command"})," to ",(0,n.jsx)(r.code,{children:"terragrunt"})]}),"\n",(0,n.jsxs)(r.li,{children:["Set the environment variable ",(0,n.jsx)(r.code,{children:"TERRAGRUNT_TFPATH"})," to ",(0,n.jsx)(r.code,{children:"tofu"})]}),"\n"]}),"\n",(0,n.jsxs)(r.h2,{id:"-validate-terraform_command",children:["\ud83d\udca1 Validate ",(0,n.jsx)(r.code,{children:"terraform_command"})]}),"\n",(0,n.jsxs)(r.p,{children:["You can validate ",(0,n.jsx)(r.code,{children:"terraform_command"})," in GitHub Actions Workflows."]}),"\n",(0,n.jsx)(r.p,{children:"e.g."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:'- uses: suzuki-shunsuke/tfaction/get-target-config@v1.2.0\n  id: target-config\n\n- run: |\n    echo "::error:: terraform_command is invalid"\n    exit 1\n  if: |\n    ! contains(fromJSON(\'["terraform", "terragrunt", "tofu"]\'), steps.target-config.outputs.terraform_command)\n'})})]})}function u(e={}){const{wrapper:r}={...(0,o.RP)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},5680:(e,r,t)=>{t.d(r,{RP:()=>l});var n=t(6540);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),l=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},u=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),f=l(t),m=o,p=f["".concat(s,".").concat(m)]||f[m]||d[m]||a;return t?n.createElement(p,i(i({ref:r},u),{},{components:t})):n.createElement(p,i({ref:r},u))}));u.displayName="MDXCreateElement"}}]);