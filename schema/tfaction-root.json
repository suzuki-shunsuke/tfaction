{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "aqua": {
      "type": "object",
      "properties": {
        "update_checksum": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "skip_push": {
              "type": "boolean"
            },
            "prune": {
              "type": "boolean"
            }
          }
        }
      }
    },
    "conftest": {
      "type": "object",
      "properties": {
        "disable_all": {
          "type": "boolean"
        },
        "policies": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "tf": {
                "type": "boolean"
              },
              "plan": {
                "type": "boolean"
              },
              "id": {
                "type": "string"
              },
              "enabled": {
                "type": "boolean"
              },
              "policy": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "data": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "fail_on_warn": {
                "type": "boolean"
              },
              "no_fail": {
                "type": "boolean"
              },
              "all_namespaces": {
                "type": "boolean"
              },
              "quiet": {
                "type": "boolean"
              },
              "trace": {
                "type": "boolean"
              },
              "strict": {
                "type": "boolean"
              },
              "show_builtin_errors": {
                "type": "boolean"
              },
              "junit_hide_message": {
                "type": "boolean"
              },
              "suppress_exceptions": {
                "type": "boolean"
              },
              "combine": {
                "type": "boolean"
              },
              "tls": {
                "type": "boolean"
              },
              "ignore": {
                "type": "string"
              },
              "parser": {
                "type": "string"
              },
              "capabilities": {
                "type": "string"
              },
              "output": {
                "type": "string"
              },
              "namespaces": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "proto_file_dirs": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "paths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "policy"
            ]
          }
        }
      }
    },
    "draft_pr": {
      "default": false,
      "type": "boolean"
    },
    "drift_detection": {
      "type": "object",
      "properties": {
        "issue_repo_owner": {
          "type": "string"
        },
        "issue_repo_name": {
          "type": "string"
        },
        "num_of_issues": {
          "type": "number"
        },
        "minimum_detection_interval": {
          "default": 168,
          "type": "number"
        },
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "env": {
      "type": "object",
      "propertyNames": {
        "type": "string"
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "label_prefixes": {
      "default": {
        "skip": "skip:",
        "tfmigrate": "tfmigrate:"
      },
      "type": "object",
      "properties": {
        "skip": {
          "default": "skip:",
          "type": "string"
        },
        "tfmigrate": {
          "default": "tfmigrate:",
          "type": "string"
        }
      }
    },
    "module_file": {
      "default": "tfaction_module.yaml",
      "type": "string"
    },
    "plan_workflow_name": {
      "type": "string"
    },
    "renovate_login": {
      "default": "renovate[bot]",
      "type": "string"
    },
    "renovate_terraform_labels": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "scaffold_working_directory": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "pull_request": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string"
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            }
          }
        },
        {
          "type": "null"
        }
      ]
    },
    "follow_up_pr": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "pull_request": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string"
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            },
            "group_label": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "prefix": {
                      "type": "string"
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            }
          }
        },
        {
          "type": "null"
        }
      ]
    },
    "scaffold_module": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "pull_request": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string"
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            }
          }
        },
        {
          "type": "null"
        }
      ]
    },
    "scaffold_tfmigrate": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "pull_request": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string"
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            }
          }
        },
        {
          "type": "null"
        }
      ]
    },
    "skip_create_pr": {
      "default": false,
      "type": "boolean"
    },
    "skip_terraform_by_renovate": {
      "type": "boolean"
    },
    "target_groups": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "aws_region": {
            "type": "string"
          },
          "aws_assume_role_arn": {
            "type": "string"
          },
          "aws_role_session_name": {
            "type": "string"
          },
          "destroy": {
            "type": "boolean"
          },
          "env": {
            "type": "object",
            "propertyNames": {
              "type": "string"
            },
            "additionalProperties": {
              "type": "string"
            }
          },
          "environment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "url": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "url"
                ]
              }
            ]
          },
          "gcp_service_account": {
            "type": "string"
          },
          "gcp_workload_identity_provider": {
            "type": "string"
          },
          "gcp_remote_backend_service_account": {
            "type": "string"
          },
          "gcp_remote_backend_workload_identity_provider": {
            "type": "string"
          },
          "gcs_bucket_name_tfmigrate_history": {
            "type": "string"
          },
          "runs_on": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          },
          "secrets": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "env_name": {
                  "type": "string"
                },
                "secret_name": {
                  "type": "string"
                }
              },
              "required": [
                "env_name",
                "secret_name"
              ]
            }
          },
          "s3_bucket_name_tfmigrate_history": {
            "type": "string"
          },
          "template_dir": {
            "type": "string"
          },
          "terraform_apply_config": {
            "type": "object",
            "properties": {
              "aws_assume_role_arn": {
                "type": "string"
              },
              "aws_role_session_name": {
                "type": "string"
              },
              "gcp_service_account": {
                "type": "string"
              },
              "gcp_workload_identity_provider": {
                "type": "string"
              },
              "gcp_access_token_scopes": {
                "type": "string"
              },
              "gcp_remote_backend_service_account": {
                "type": "string"
              },
              "gcp_remote_backend_workload_identity_provider": {
                "type": "string"
              },
              "environment": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "name",
                      "url"
                    ]
                  }
                ]
              },
              "secrets": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "env_name": {
                      "type": "string"
                    },
                    "secret_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "env_name",
                    "secret_name"
                  ]
                }
              },
              "runs_on": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "env": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "aws_secrets_manager": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "envs": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "env_name": {
                            "type": "string"
                          },
                          "secret_key": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "env_name"
                        ]
                      }
                    },
                    "secret_id": {
                      "type": "string"
                    },
                    "version_id": {
                      "type": "string"
                    },
                    "version_stage": {
                      "type": "string"
                    },
                    "aws_region": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "envs",
                    "secret_id"
                  ]
                }
              }
            }
          },
          "terraform_plan_config": {
            "type": "object",
            "properties": {
              "aws_assume_role_arn": {
                "type": "string"
              },
              "aws_role_session_name": {
                "type": "string"
              },
              "gcp_service_account": {
                "type": "string"
              },
              "gcp_workload_identity_provider": {
                "type": "string"
              },
              "gcp_access_token_scopes": {
                "type": "string"
              },
              "gcp_remote_backend_service_account": {
                "type": "string"
              },
              "gcp_remote_backend_workload_identity_provider": {
                "type": "string"
              },
              "environment": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "name",
                      "url"
                    ]
                  }
                ]
              },
              "secrets": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "env_name": {
                      "type": "string"
                    },
                    "secret_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "env_name",
                    "secret_name"
                  ]
                }
              },
              "runs_on": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "env": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "aws_secrets_manager": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "envs": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "env_name": {
                            "type": "string"
                          },
                          "secret_key": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "env_name"
                        ]
                      }
                    },
                    "secret_id": {
                      "type": "string"
                    },
                    "version_id": {
                      "type": "string"
                    },
                    "version_stage": {
                      "type": "string"
                    },
                    "aws_region": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "envs",
                    "secret_id"
                  ]
                }
              }
            }
          },
          "tfmigrate_apply_config": {
            "type": "object",
            "properties": {
              "aws_assume_role_arn": {
                "type": "string"
              },
              "aws_role_session_name": {
                "type": "string"
              },
              "gcp_service_account": {
                "type": "string"
              },
              "gcp_workload_identity_provider": {
                "type": "string"
              },
              "gcp_access_token_scopes": {
                "type": "string"
              },
              "gcp_remote_backend_service_account": {
                "type": "string"
              },
              "gcp_remote_backend_workload_identity_provider": {
                "type": "string"
              },
              "environment": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "name",
                      "url"
                    ]
                  }
                ]
              },
              "secrets": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "env_name": {
                      "type": "string"
                    },
                    "secret_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "env_name",
                    "secret_name"
                  ]
                }
              },
              "runs_on": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "env": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "aws_secrets_manager": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "envs": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "env_name": {
                            "type": "string"
                          },
                          "secret_key": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "env_name"
                        ]
                      }
                    },
                    "secret_id": {
                      "type": "string"
                    },
                    "version_id": {
                      "type": "string"
                    },
                    "version_stage": {
                      "type": "string"
                    },
                    "aws_region": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "envs",
                    "secret_id"
                  ]
                }
              }
            }
          },
          "tfmigrate_plan_config": {
            "type": "object",
            "properties": {
              "aws_assume_role_arn": {
                "type": "string"
              },
              "aws_role_session_name": {
                "type": "string"
              },
              "gcp_service_account": {
                "type": "string"
              },
              "gcp_workload_identity_provider": {
                "type": "string"
              },
              "gcp_access_token_scopes": {
                "type": "string"
              },
              "gcp_remote_backend_service_account": {
                "type": "string"
              },
              "gcp_remote_backend_workload_identity_provider": {
                "type": "string"
              },
              "environment": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "name",
                      "url"
                    ]
                  }
                ]
              },
              "secrets": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "env_name": {
                      "type": "string"
                    },
                    "secret_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "env_name",
                    "secret_name"
                  ]
                }
              },
              "runs_on": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "env": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "aws_secrets_manager": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "envs": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "env_name": {
                            "type": "string"
                          },
                          "secret_key": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "env_name"
                        ]
                      }
                    },
                    "secret_id": {
                      "type": "string"
                    },
                    "version_id": {
                      "type": "string"
                    },
                    "version_stage": {
                      "type": "string"
                    },
                    "aws_region": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "envs",
                    "secret_id"
                  ]
                }
              }
            }
          },
          "working_directory": {
            "type": "string"
          },
          "aws_secrets_manager": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "envs": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "env_name": {
                        "type": "string"
                      },
                      "secret_key": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "env_name"
                    ]
                  }
                },
                "secret_id": {
                  "type": "string"
                },
                "version_id": {
                  "type": "string"
                },
                "version_stage": {
                  "type": "string"
                },
                "aws_region": {
                  "type": "string"
                }
              },
              "required": [
                "envs",
                "secret_id"
              ]
            }
          },
          "terraform_command": {
            "type": "string"
          },
          "conftest": {
            "type": "object",
            "properties": {
              "disable_all": {
                "type": "boolean"
              },
              "policies": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tf": {
                      "type": "boolean"
                    },
                    "plan": {
                      "type": "boolean"
                    },
                    "id": {
                      "type": "string"
                    },
                    "enabled": {
                      "type": "boolean"
                    },
                    "policy": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      ]
                    },
                    "data": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      ]
                    },
                    "fail_on_warn": {
                      "type": "boolean"
                    },
                    "no_fail": {
                      "type": "boolean"
                    },
                    "all_namespaces": {
                      "type": "boolean"
                    },
                    "quiet": {
                      "type": "boolean"
                    },
                    "trace": {
                      "type": "boolean"
                    },
                    "strict": {
                      "type": "boolean"
                    },
                    "show_builtin_errors": {
                      "type": "boolean"
                    },
                    "junit_hide_message": {
                      "type": "boolean"
                    },
                    "suppress_exceptions": {
                      "type": "boolean"
                    },
                    "combine": {
                      "type": "boolean"
                    },
                    "tls": {
                      "type": "boolean"
                    },
                    "ignore": {
                      "type": "string"
                    },
                    "parser": {
                      "type": "string"
                    },
                    "capabilities": {
                      "type": "string"
                    },
                    "output": {
                      "type": "string"
                    },
                    "namespaces": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "proto_file_dirs": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "paths": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "policy"
                  ]
                }
              }
            }
          },
          "drift_detection": {
            "type": "object",
            "properties": {
              "enabled": {
                "type": "boolean"
              }
            }
          }
        },
        "required": [
          "working_directory"
        ]
      }
    },
    "tflint": {
      "default": {
        "enabled": true,
        "fix": false
      },
      "type": "object",
      "properties": {
        "enabled": {
          "default": true,
          "type": "boolean"
        },
        "fix": {
          "default": false,
          "type": "boolean"
        },
        "reviewdog": {
          "type": "object",
          "properties": {
            "filter_mode": {
              "type": "string",
              "enum": [
                "added",
                "diff_context",
                "file",
                "nofilter"
              ]
            },
            "fail_level": {
              "type": "string",
              "enum": [
                "none",
                "any",
                "info",
                "warning",
                "error"
              ]
            }
          }
        }
      }
    },
    "trivy": {
      "default": {
        "enabled": true
      },
      "type": "object",
      "properties": {
        "enabled": {
          "default": true,
          "type": "boolean"
        },
        "reviewdog": {
          "type": "object",
          "properties": {
            "filter_mode": {
              "type": "string",
              "enum": [
                "added",
                "diff_context",
                "file",
                "nofilter"
              ]
            },
            "fail_level": {
              "type": "string",
              "enum": [
                "none",
                "any",
                "info",
                "warning",
                "error"
              ]
            }
          }
        }
      }
    },
    "terraform_docs": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "update_local_path_module_caller": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "terraform_command": {
      "default": "terraform",
      "type": "string"
    },
    "update_related_pull_requests": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "working_directory_file": {
      "default": "tfaction.yaml",
      "type": "string"
    },
    "replace_target": {
      "type": "object",
      "properties": {
        "patterns": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "regexp": {
                "type": "string"
              },
              "replace": {
                "type": "string"
              },
              "flags": {
                "type": "string"
              }
            },
            "required": [
              "regexp",
              "replace"
            ]
          }
        }
      },
      "required": [
        "patterns"
      ]
    },
    "providers_lock_opts": {
      "type": "string"
    },
    "securefix_action": {
      "type": "object",
      "properties": {
        "server_repository": {
          "type": "string"
        },
        "pull_request": {
          "type": "object",
          "properties": {
            "base_branch": {
              "type": "string"
            }
          },
          "required": [
            "base_branch"
          ]
        }
      },
      "required": [
        "server_repository",
        "pull_request"
      ]
    },
    "limit_changed_dirs": {
      "type": "object",
      "properties": {
        "working_dirs": {
          "type": "number"
        },
        "modules": {
          "type": "number"
        }
      }
    }
  },
  "required": [
    "plan_workflow_name",
    "target_groups"
  ]
}